(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(5886)}])},8453:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(1462).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5451:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(1462).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1027:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var l=t(5893),a=t(801);let r={default:"bg-slate-100 text-slate-700",success:"bg-emerald-100 text-emerald-700",warning:"bg-amber-100 text-amber-700",danger:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700"};function n(e){let{className:s,variant:t="default",...n}=e;return(0,l.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",r[t],s),...n})}},5886:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var l=t(5893),a=t(1664),r=t.n(a),n=t(3552),i=t(9199);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,t(1462).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var c=t(8500),o=t(8453),x=t(5451),m=t(7168),u=t(7294),h=t(2336),p=t(1064),j=t(2417),v=t(1027),b=t(6471),y=t(8111),g=t(81),f=t(8701);function N(){(0,b.q)(e=>e.groups),(0,b.q)(e=>e.lastSyncedAt);let{user:e}=(0,y.a)(),{data:s,isLoading:t}=(0,f.RW)(),{data:a=[]}=(0,f.D0)(),{isSyncing:N,pendingJobs:w}=(0,g._)(),k=(0,f.CB)(),D=(0,f.Ui)(),[C,M]=(0,u.useState)(!1),[E,O]=(0,u.useState)({title:"",amount:"",category:"food",currency:"USD"}),U=(null==s?void 0:s.length)||0,T=(null==s?void 0:s.reduce((e,s)=>{var t;return e+((null===(t=s.members)||void 0===t?void 0:t.length)||0)},0))||0,Z=(null==s?void 0:s.reduce((e,s)=>e+(s.expenses||[]).reduce((e,s)=>e+s.amount,0),0))||0,A=(null==s?void 0:s.reduce((s,t)=>{if(!e)return s;let l=t.expenses||[],a=0,r=0;return l.forEach(s=>{var t,l;("number"==typeof s.paidBy?s.paidBy:null===(t=s.paidBy)||void 0===t?void 0:t.id)===e.id&&(a+=s.amount);let n=null===(l=s.splits)||void 0===l?void 0:l.find(s=>s.memberId===e.id);n&&(r+=n.amount)}),s+(a-r)},0))||0,B=a.reduce((e,s)=>e+s.amount,0),S=async()=>{if(E.title&&E.amount)try{await k.mutateAsync({title:E.title,category:E.category,currency:E.currency,amount:parseFloat(E.amount),incurredOn:new Date().toISOString()}),O({title:"",amount:"",category:"food",currency:"USD"}),M(!1)}catch(e){console.error("Failed to add expense:",e)}},_=async e=>{if(confirm("Are you sure you want to delete this expense?"))try{await D.mutateAsync(e)}catch(e){console.error("Failed to delete expense:",e)}};return(0,l.jsx)(h.L,{title:"Overview",description:"Your travel dashboard",actions:(0,l.jsxs)(j.z,{onClick:()=>{let e=[];if(null==s||s.forEach(s=>{var t;null===(t=s.expenses)||void 0===t||t.forEach(t=>{e.push({Type:"Group",Group:s.title,Title:t.title,Amount:t.amount,Currency:t.currency,Category:t.category,Date:t.incurredOn?(0,m.WU)(new Date(t.incurredOn),"yyyy-MM-dd"):""})})}),a.forEach(s=>{e.push({Type:"Personal",Group:"-",Title:s.title,Amount:s.amount,Currency:s.currency,Category:s.category,Date:s.incurredOn?(0,m.WU)(new Date(s.incurredOn),"yyyy-MM-dd"):""})}),0===e.length){alert("No expenses to export");return}let t=Object.keys(e[0]),l=new Blob([[t.join(","),...e.map(e=>t.map(s=>e[s]).join(","))].join("\n")],{type:"text/csv"}),r=window.URL.createObjectURL(l),n=document.createElement("a");n.href=r,n.download="all-expenses-".concat((0,m.WU)(new Date,"yyyy-MM-dd"),".csv"),n.click(),window.URL.revokeObjectURL(r)},variant:"secondary",children:[(0,l.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Export All"]}),children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsx)(p.Zb,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-500 to-blue-600 text-white overflow-hidden",children:(0,l.jsxs)(p.aY,{className:"pt-6 relative",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),(0,l.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-blue-100",children:"Active Groups"}),(0,l.jsx)("p",{className:"text-4xl font-bold text-white mt-1",children:U}),(0,l.jsx)("p",{className:"text-xs text-blue-100 mt-2",children:"✈️ Adventures await"})]}),(0,l.jsx)("div",{className:"h-16 w-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:(0,l.jsx)(i.Z,{className:"h-8 w-8 text-white"})})]})]})}),(0,l.jsx)(p.Zb,{className:"border-0 shadow-lg bg-gradient-to-br from-purple-500 to-pink-600 text-white overflow-hidden",children:(0,l.jsxs)(p.aY,{className:"pt-6 relative",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),(0,l.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-purple-100",children:"Total Members"}),(0,l.jsx)("p",{className:"text-4xl font-bold text-white mt-1",children:T}),(0,l.jsx)("p",{className:"text-xs text-purple-100 mt-2",children:"\uD83C\uDF0D Global community"})]}),(0,l.jsx)("div",{className:"h-16 w-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:(0,l.jsx)(d,{className:"h-8 w-8 text-white"})})]})]})}),(0,l.jsx)(p.Zb,{className:"border-0 shadow-lg bg-gradient-to-br from-orange-500 to-red-600 text-white overflow-hidden",children:(0,l.jsxs)(p.aY,{className:"pt-6 relative",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),(0,l.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-orange-100",children:"Total Expenses"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-white mt-1",children:["$",(Z+B).toLocaleString()]}),(0,l.jsxs)("div",{className:"mt-1 space-y-0.5",children:[(0,l.jsxs)("p",{className:"text-xs text-orange-100",children:["Groups: $",Z.toLocaleString()]}),(0,l.jsxs)("p",{className:"text-xs text-orange-100",children:["Personal: $",B.toLocaleString()]}),0!==A&&(0,l.jsxs)("p",{className:"text-xs font-semibold ".concat("text-white bg-white/20 px-2 py-1 rounded"),children:[A>=0?"\uD83D\uDCB0 You are owed":"\uD83D\uDCB8 You owe"," $",Math.abs(A).toFixed(2)]})]})]}),(0,l.jsx)("div",{className:"h-16 w-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:(0,l.jsx)(c.Z,{className:"h-8 w-8 text-white"})})]})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)(p.Zb,{className:"border-white/50 bg-white/60 backdrop-blur-sm shadow-xl",children:[(0,l.jsx)(p.Ol,{children:(0,l.jsxs)(p.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF0F"}),"Group Expenses"]})}),(0,l.jsx)(p.aY,{children:t?(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Loading..."}):s&&s.length>0?(0,l.jsx)("div",{className:"space-y-3",children:s.map(s=>{var t,a;let n=(null===(t=s.expenses)||void 0===t?void 0:t.reduce((e,s)=>e+s.amount,0))||0,i=s.expenses||[],d=0,c=0;i.forEach(s=>{var t,l;("number"==typeof s.paidBy?s.paidBy:null===(t=s.paidBy)||void 0===t?void 0:t.id)===(null==e?void 0:e.id)&&(d+=s.amount);let a=null===(l=s.splits)||void 0===l?void 0:l.find(s=>s.memberId===(null==e?void 0:e.id));a&&(c+=a.amount)});let o=d-c,x=(null===(a=s.expenses)||void 0===a?void 0:a.slice(0,3))||[];return(0,l.jsx)("div",{className:"border-b pb-3 last:border-b-0",children:(0,l.jsx)(r(),{href:"/groups/".concat(s.id),children:(0,l.jsxs)("div",{className:"flex justify-between items-start hover:bg-slate-50 p-2 rounded cursor-pointer",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:s.title}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:s.destination}),x.length>0&&(0,l.jsx)("div",{className:"mt-2 space-y-1",children:x.map(e=>(0,l.jsxs)("p",{className:"text-xs text-slate-600",children:[e.title,": ",e.currency," ",e.amount]},e.id))})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:["$",n.toFixed(2)]}),(0,l.jsx)("p",{className:"text-xs font-medium ".concat(o>=0?"text-green-600":"text-red-600"),children:o>=0?"+$".concat(o.toFixed(2)):"-$".concat(Math.abs(o).toFixed(2))})]})]})})},s.id)})}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"No group expenses yet"}),(0,l.jsx)(r(),{href:"/groups",children:(0,l.jsx)(j.z,{variant:"secondary",size:"sm",children:"View Groups"})})]})})]}),(0,l.jsxs)(p.Zb,{className:"border-white/50 bg-white/60 backdrop-blur-sm shadow-xl",children:[(0,l.jsx)(p.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(p.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB3"}),"Personal Expenses"]}),(0,l.jsx)(j.z,{size:"sm",variant:C?"secondary":"primary",onClick:()=>M(!C),children:(0,l.jsx)(o.Z,{className:"h-4 w-4"})})]})}),(0,l.jsxs)(p.aY,{children:[C&&(0,l.jsxs)("div",{className:"mb-4 p-4 border rounded-lg bg-slate-50 space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),(0,l.jsx)("input",{type:"text",value:E.title,onChange:e=>O({...E,title:e.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Expense title"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount"}),(0,l.jsx)("input",{type:"number",value:E.amount,onChange:e=>O({...E,amount:e.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"0.00"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),(0,l.jsxs)("select",{value:E.currency,onChange:e=>O({...E,currency:e.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[(0,l.jsx)("option",{value:"USD",children:"USD"}),(0,l.jsx)("option",{value:"EUR",children:"EUR"}),(0,l.jsx)("option",{value:"GBP",children:"GBP"}),(0,l.jsx)("option",{value:"BDT",children:"BDT"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Category"}),(0,l.jsxs)("select",{value:E.category,onChange:e=>O({...E,category:e.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[(0,l.jsx)("option",{value:"food",children:"Food"}),(0,l.jsx)("option",{value:"accommodation",children:"Accommodation"}),(0,l.jsx)("option",{value:"transport",children:"Transport"}),(0,l.jsx)("option",{value:"activities",children:"Activities"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(j.z,{onClick:S,disabled:k.isPending,className:"flex-1",children:k.isPending?"Adding...":"Add Expense"}),(0,l.jsx)(j.z,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"})]})]}),a.length>0?(0,l.jsxs)("div",{className:"space-y-2",children:[a.map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-lg hover:bg-slate-50",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:e.category}),e.incurredOn&&(0,l.jsx)("p",{className:"text-xs text-slate-400",children:(0,m.WU)(new Date(e.incurredOn),"MMM d, yyyy")})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.currency," ",e.amount]})}),(0,l.jsx)("button",{onClick:()=>_(e.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",disabled:D.isPending,children:(0,l.jsx)(x.Z,{className:"h-4 w-4 text-red-500"})})]})]},e.id)),(0,l.jsx)("div",{className:"pt-3 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-700",children:"Total Personal"}),(0,l.jsx)("p",{className:"font-bold text-slate-900",children:B.toLocaleString()})]})})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"No personal expenses yet"}),(0,l.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Click + to add your first expense"})]})]})]})]}),s&&s.length>0&&(0,l.jsxs)(p.Zb,{children:[(0,l.jsx)(p.Ol,{children:(0,l.jsx)(p.ll,{children:"Active Trips"})}),(0,l.jsx)(p.aY,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{var s,t;return(0,l.jsx)(r(),{href:"/groups/".concat(e.id),children:(0,l.jsxs)("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:e.destination}),(0,l.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,l.jsxs)(v.C,{variant:"default",children:[(null===(s=e.members)||void 0===s?void 0:s.length)||0," members"]}),(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:[(null===(t=e.expenses)||void 0===t?void 0:t.length)||0," expenses"]})]}),e.startDate&&(0,l.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:(0,m.WU)(new Date(e.startDate),"MMM d, yyyy")})]})},e.id)})})})]})]})})}}},function(e){e.O(0,[664,40,803,168,542,152,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);