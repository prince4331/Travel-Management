(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{9483:function(e,t,n){var r;r=function(){return(function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var u=Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){return i(t[s][1][e]||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){r=!0;for(var e,t,n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p(function(){t(i,r)});"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==u?d(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=Array(n),a=0,u=-1,c=new this(i);++u<n;)(function(e,i){t.resolve(e).then(function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))},function(e){r||(r=!0,o.reject(c,e))})})(e[u],u);return c},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(i);++s<n;)(function(e){t.resolve(e).then(function(e){r||(r=!0,o.resolve(a,e))},function(e){r||(r=!0,o.reject(a,e))})})(e[s]);return a}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function u(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",f=void 0,h={},p=Object.prototype.toString,y="readonly",v="readwrite";function m(e){var t=h[e.name],n={};n.promise=new s(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function g(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new s(function(n,r){if(h[e.name]=h[e.name]||x(),e.db){if(!t)return n(e.db);m(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"===n.name)console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw n}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),g(e)}})}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function O(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,n=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return u(n,e,e),n}function _(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return s.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),S(e,!0)}).then(function(){return(function(e){m(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,S(e,!1).then(function(t){return(e.db=t,w(e))?S(e,!0):t}).then(function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(t){throw b(e,t),t})})(e).then(function(){_(e,t,n,r-1)})}).catch(n);n(i)}}function x(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i=x(),h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=E);var o=[];function a(){return s.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==t&&o.push(c._initReady().catch(a))}var l=i.forages.slice(0);return s.all(o).then(function(){return n.db=i.db,S(n,!1)}).then(function(e){return(n.db=e,w(n,t._defaultConfig.version))?S(n,!0):e}).then(function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){_(n._dbInfo,y,function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;I(r)&&(r=O(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){_(n._dbInfo,y,function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),I(e)&&(e=O(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=new s(function(n,i){var a;r.ready().then(function(){var e;return(a=r._dbInfo,"[object Blob]"===p.call(t))?(e=a.db,"boolean"==typeof f?s.resolve(f):new s(function(t){var n=e.transaction(d,v),r=o([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);t(navigator.userAgent.match(/Edge\//)||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1}).then(function(e){return f=e})).then(function(e){return e?t:new s(function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){e({__local_forage_encoded_blob:!0,data:btoa(n.target.result||""),type:t.type})},r.readAsBinaryString(t)})}):t}).then(function(t){_(r._dbInfo,v,function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){_(n._dbInfo,v,function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){_(t._dbInfo,v,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){_(t._dbInfo,y,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new s(function(t,r){if(e<0){t(null);return}n.ready().then(function(){_(n._dbInfo,y,function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,u=s.openKeyCursor();u.onsuccess=function(){var n=u.result;if(!n){t(null);return}0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))},u.onerror=function(){r(u.error)}}catch(e){r(e)}})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){_(t._dbInfo,y,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;if(!t){e(s);return}s.push(t.key),t.continue()},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):S(e,!1).then(function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});n=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;m(e);var r=h[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var u=o[a];u._dbInfo.db=null,u._dbInfo.version=n}return new s(function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,g(n._dbInfo)}}).catch(function(t){throw(b(e,t)||s.resolve()).catch(function(){}),t})}}):o.then(function(t){m(e);var n=h[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new s(function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)g(r[t]._dbInfo)}).catch(function(t){throw(b(e,t)||s.resolve()).catch(function(){}),t})})}else n=s.reject("Invalid arguments");return a(n,t),n}},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=/^~~local_forage_type~([^~]+)~/,T="__lfsc__:",j=T.length,D="arbf",N="blob",P="si08",R="ui08",q="uic8",F="si16",M="si32",Q="ur16",B="ui32",L="fl32",z="fl64",U=j+D.length,H=Object.prototype.toString;function K(e){var t,n,r,i,o,s=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(t=0;t<a;t+=4)n=A.indexOf(e[t]),r=A.indexOf(e[t+1]),i=A.indexOf(e[t+2]),o=A.indexOf(e[t+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}function G(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=A[n[t]>>2]+A[(3&n[t])<<4|n[t+1]>>4]+A[(15&n[t+1])<<2|n[t+2]>>6]+A[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var W={serialize:function(e,t){var n="";if(e&&(n=H.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===H.call(e.buffer))){var r,i=T;e instanceof ArrayBuffer?(r=e,i+=D):(r=e.buffer,"[object Int8Array]"===n?i+=P:"[object Uint8Array]"===n?i+=R:"[object Uint8ClampedArray]"===n?i+=q:"[object Int16Array]"===n?i+=F:"[object Uint16Array]"===n?i+=Q:"[object Int32Array]"===n?i+=M:"[object Uint32Array]"===n?i+=B:"[object Float32Array]"===n?i+=L:"[object Float64Array]"===n?i+=z:t(Error("Failed to get type for BinaryArray"))),t(i+G(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){t(T+N+("~~local_forage_type~"+e.type)+"~"+G(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,j)!==T)return JSON.parse(e);var t,n=e.substring(U),r=e.substring(j,U);if(r===N&&C.test(n)){var i=n.match(C);t=i[1],n=n.substring(i[0].length)}var s=K(n);switch(r){case D:return s;case N:return o([s],{type:t});case P:return new Int8Array(s);case R:return new Uint8Array(s);case q:return new Uint8ClampedArray(s);case F:return new Int16Array(s);case Q:return new Uint16Array(s);case M:return new Int32Array(s);case B:return new Uint32Array(s);case L:return new Float32Array(s);case z:return new Float64Array(s);default:throw Error("Unkown type: "+r)}},stringToBuffer:K,bufferToString:G};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Z(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,a){a.rows.length?o(e,s):V(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,s)},o)}function J(e,t,n,r){var i=this;e=c(e);var o=new s(function(o,s){i.ready().then(function(){void 0===t&&(t=null);var a=t,u=i._dbInfo;u.serializer.serialize(t,function(t,c){c?s(c):u.db.transaction(function(n){Z(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(a)},function(e,t){s(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0){o(J.apply(i,[e,a,n,r-1]));return}s(t)}})})}).catch(s)});return a(o,n),o}var X={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new s(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){V(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=W,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){Z(n,i,"SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var u=o.item(a),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,u.key,a+1))){t(c);return}}t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){Z(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){return J.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){Z(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Z(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Z(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){e(n.rows.item(0).c)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){Z(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){t(n.rows.length?n.rows.item(0).key:null)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Z(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var i=this;return a(n=e.name?new s(function(t){var n;(n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName)?t({db:n,storeNames:[e.storeName]}):t(new s(function(e,t){n.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:n,storeNames:i})},function(e,n){t(n)})},function(e){t(e)})}))}).then(function(e){return new s(function(t,n){e.db.transaction(function(r){for(var i=[],o=0,a=e.storeNames.length;o<a;o++)i.push(function(e){return new s(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}(e.storeNames[o]));s.all(i).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):s.reject("Invalid arguments"),t),n}};function Y(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var $={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return(t.keyPrefix=Y(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0)?(this._dbInfo=t,t.serializer=W,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var u=localStorage.key(a);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(i),s++)))return c}}});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new s(function(i,o){var s=r._dbInfo;s.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&o(e),o(e)}})})});return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return a(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return a(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return a(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return a(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n,r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var i=this;return a(n=e.name?new s(function(t){t(e.storeName?Y(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):s.reject("Invalid arguments"),t),n}},ee=function(e,t){for(var n,r=e.length,i=0;i<r;){if((n=e[i])===t||"number"==typeof n&&"number"==typeof t&&isNaN(n)&&isNaN(t))return!0;i++}return!1},et=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},en={},er={},ei={INDEXEDDB:k,WEBSQL:X,LOCALSTORAGE:$},eo=[ei.INDEXEDDB._driver,ei.WEBSQL._driver,ei.LOCALSTORAGE._driver],es=["dropInstance"],ea=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(es),eu={description:"",driver:eo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ec(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(et(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var el=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),ei)if(ei.hasOwnProperty(n)){var r=ei[n],i=r._driver;this[n]=i,en[i]||this.defineDriver(r)}this._defaultConfig=ec({},eu),this._config=ec({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if((void 0===e?"undefined":r(e))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new s(function(t,n){try{var r=e._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver){n(i);return}for(var o=ea.concat("_initStorage"),u=0,c=o.length;u<c;u++){var l=o[u];if((!ee(es,l)||e[l])&&"function"!=typeof e[l]){n(i);return}}!function(){for(var t=function(e){return function(){var t=Error("Method "+e+" is not implemented by the current driver"),n=s.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=es.length;n<r;n++){var i=es[n];e[i]||(e[i]=t(i))}}();var d=function(n){en[r]&&console.info("Redefining LocalForage driver: "+r),en[r]=e,er[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}});return u(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=en[e]?s.resolve(en[e]):s.reject(Error("Driver not found."));return u(r,t,n),r},e.prototype.getSerializer=function(e){var t=s.resolve(W);return u(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return u(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;et(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=c.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(){var e=0;return function t(){for(;e<i.length;){var n=i[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(n).then(a).catch(t)}o();var u=Error("No available storage method found.");return r._driverSet=s.reject(u),r._driverSet}()}})}).catch(function(){o();var e=Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet}),u(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!er[e]},e.prototype._extend=function(e){ec(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ea.length;e<t;e++)!function(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}(this,ea[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=el},{3:3}]},{},[4])(4)},e.exports=r()},3454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(4050)}])},1462:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(7294);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:c="",children:l,iconNode:d,...f}=e;return(0,r.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:n,strokeWidth:u?24*Number(a)/Number(i):a,className:o("lucide",c),...f},[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),u=(e,t)=>{let n=(0,r.forwardRef)((n,s)=>{let{className:u,...c}=n;return(0,r.createElement)(a,{ref:s,iconNode:t,className:o("lucide-".concat(i(e)),u),...c})});return n.displayName="".concat(e),n}},3552:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(1462).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8176:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(1462).Z)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},3313:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(1462).Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},8154:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(1462).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8111:function(e,t,n){"use strict";n.d(t,{H:function(){return c},a:function(){return l}});var r=n(5893),i=n(7294),o=n(716);let s="travel-management.tokens",a=(0,i.createContext)(void 0),u=()=>{try{let e=window.localStorage.getItem(s);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to parse stored auth tokens",e),null}},c=e=>{let{children:t}=e,[n,c]=(0,i.useState)({user:null,accessToken:null,refreshToken:null,loading:!0}),l=(0,i.useCallback)((e,t)=>{window.localStorage.setItem(s,JSON.stringify({accessToken:e,refreshToken:t})),c(n=>({...n,accessToken:e,refreshToken:t}))},[]),d=(0,i.useCallback)(()=>{window.localStorage.removeItem(s),c(e=>({...e,accessToken:null,refreshToken:null}))},[]),f=(0,i.useCallback)(async e=>{let t=await (0,o.S)("/auth/me",{accessToken:e});c(e=>({...e,user:t}))},[]),h=(0,i.useCallback)(async()=>{if(!n.refreshToken)return null;let e=await (0,o.S)("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:n.refreshToken}),accessToken:null});return l(e.accessToken,e.refreshToken),e.accessToken},[l,n.refreshToken]);(0,i.useEffect)(()=>{let e=!0;return(async()=>{let t=u();if((null==t?void 0:t.accessToken)&&(null==t?void 0:t.refreshToken)){if(!e)return;c(e=>({...e,accessToken:t.accessToken,refreshToken:t.refreshToken}));try{await f(t.accessToken)}catch(t){console.warn("Failed to restore session, clearing tokens.",t),e&&(d(),c(e=>({...e,user:null})))}}e&&c(e=>({...e,loading:!1}))})(),()=>{e=!1}},[d,f]);let p=(0,i.useCallback)(async(e,t)=>{let n=await (0,o.S)("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});l(n.accessToken,n.refreshToken),await f(n.accessToken)},[f,l]),y=(0,i.useCallback)(async e=>{await (0,o.S)("/auth/signup",{method:"POST",body:JSON.stringify(e)}),await p(e.email,e.password)},[p]),v=(0,i.useCallback)(()=>{d(),c({user:null,accessToken:null,refreshToken:null,loading:!1})},[d]),m=(0,i.useCallback)(async()=>{n.accessToken&&await f(n.accessToken)},[f,n.accessToken]),g=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await (0,o.S)(e,{...t,accessToken:n.accessToken})}catch(n){if((null==n?void 0:n.status)===401){let n=await h();if(n)return(0,o.S)(e,{...t,accessToken:n});v()}throw n}},[v,h,n.accessToken]),b=(0,i.useMemo)(()=>({...n,login:p,signup:y,logout:v,refreshProfile:m,authFetch:g}),[g,p,v,m,y,n]);return(0,r.jsx)(a.Provider,{value:b,children:t})},l=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},81:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(7294),i=n(8111),o=n(716),s=n(6471),a=n(2003);function u(){let{accessToken:e}=(0,i.a)(),{syncQueue:t,markJobSynced:n,markJobFailed:u}=(0,s.q)(),[c,l]=(0,r.useState)(!1),[d,f]=(0,r.useState)(navigator.onLine);(0,r.useEffect)(()=>{let e=()=>{console.log("[OfflineSync] Back online! Starting sync..."),f(!0)},t=()=>{console.log("[OfflineSync] Gone offline"),f(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{if("serviceWorker"in navigator){let t=t=>{"BACKGROUND_SYNC"===t.data.type&&(console.log("[OfflineSync] Background sync triggered"),d&&e&&h())};return navigator.serviceWorker.addEventListener("message",t),()=>{navigator.serviceWorker.removeEventListener("message",t)}}},[d,e]);let h=async()=>{if(!c&&d&&e){l(!0),console.log("[OfflineSync] Starting sync...");try{let i=await a.N.getPendingSyncItems();for(let t of(console.log("[OfflineSync] Found ".concat(i.length," items in IndexedDB queue")),i))try{await (0,o.S)(t.url,{method:t.method,accessToken:e,body:t.body?JSON.stringify(t.body):void 0}),await a.N.markSyncItemComplete(t.id),console.log("[OfflineSync] Synced item ".concat(t.id))}catch(e){console.error("[OfflineSync] Failed to sync item ".concat(t.id,":"),e),await a.N.markSyncItemFailed(t.id)}for(let i of t.filter(e=>"pending"===e.status))try{await (0,o.S)("/sync/".concat(i.entity),{method:"POST",accessToken:e,body:JSON.stringify(i.payload)}),n(i.id),console.log("[OfflineSync] Synced job ".concat(i.id))}catch(e){var r;console.error("[OfflineSync] Failed to sync job ".concat(i.id,":"),e),u(i.id,null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"Unknown error")}console.log("[OfflineSync] Sync complete")}catch(e){console.error("[OfflineSync] Sync error:",e)}finally{l(!1)}}};return(0,r.useEffect)(()=>{if(d&&e&&t.length>0){let e=setTimeout(()=>{h()},1e3);return()=>clearTimeout(e)}},[d,e,t.length]),{isSyncing:c,isOnline:d,pendingJobs:t.filter(e=>"pending"===e.status).length,syncNow:h}}},716:function(e,t,n){"use strict";n.d(t,{S:function(){return y},E:function(){return v}});var r=n(4139),i=n(6888),o=n(7037),s=n(7506),a=class extends s.l{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){let o=t.queryKey,s=t.queryHash??(0,r.Rm)(o,t),a=this.get(s);return a||(a=new i.A({client:e,queryKey:o,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r._x)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,r._x)(e,t)):t}notify(e){o.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){o.Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){o.Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},u=n(9289),c=class extends s.l{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#r=0}#t;#n;#r;build(e,t,n){let r=new u.m({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#t.add(e);let t=l(e);if("string"==typeof t){let n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=l(e);if("string"==typeof t){let n=this.#n.get(t);if(n){if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=l(e);if("string"!=typeof t)return!0;{let n=this.#n.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=l(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#n.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){o.Vr.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#n.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.X7)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,r.X7)(e,t))}notify(e){o.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return o.Vr.batch(()=>Promise.all(e.map(e=>e.continue().catch(r.ZT))))}};function l(e){return e.options.scope?.id}var d=n(6474),f=n(4304);function h(e){return{onFetch:(t,n)=>{let i=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],a=t.state.data?.pageParams||[],u={pages:[],pageParams:[]},c=0,l=async()=>{let n=!1,l=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)})},d=(0,r.cG)(t.options,t.fetchOptions),f=async(e,i,o)=>{if(n)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);let s=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:o?"backward":"forward",meta:t.options.meta};return l(e),e})(),a=await d(s),{maxPages:u}=t.options,c=o?r.Ht:r.VX;return{pages:c(e.pages,a,u),pageParams:c(e.pageParams,i,u)}};if(o&&s.length){let e="backward"===o,t={pages:s,pageParams:a},n=(e?function(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}:p)(i,t);u=await f(t,n,e)}else{let t=e??s.length;do{let e=0===c?a[0]??i.initialPageParam:p(i,u);if(c>0&&null==e)break;u=await f(u,e),c++}while(c<t)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=l}}}function p(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Headers(t.headers||{});t.skipAuthHeaders||n.has("Content-Type")||!t.body||t.body instanceof FormData||n.set("Content-Type","application/json"),t.accessToken&&n.set("Authorization","Bearer ".concat(t.accessToken));let r=await fetch("".concat("http://192.168.0.106:3000").concat(e),{...t,headers:n}),i=r.headers.get("content-type"),o=(null==i?void 0:i.includes("application/json"))?await r.json():await r.text();if(!r.ok){let e="string"==typeof o?{message:o}:o;throw e.status=r.status,e}return o}let v=new class{#i;#o;#s;#a;#u;#c;#l;#d;constructor(e={}){this.#i=e.queryCache||new a,this.#o=e.mutationCache||new c,this.#s=e.defaultOptions||{},this.#a=new Map,this.#u=new Map,this.#c=0}mount(){this.#c++,1===this.#c&&(this.#l=d.j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onFocus())}),this.#d=f.N.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onOnline())}))}unmount(){this.#c--,0===this.#c&&(this.#l?.(),this.#l=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#i.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#o.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#i.build(this,t),i=n.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,r.KC)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#i.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let i=this.defaultQueryOptions({queryKey:e}),o=this.#i.get(i.queryHash),s=o?.state.data,a=(0,r.SE)(t,s);if(void 0!==a)return this.#i.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return o.Vr.batch(()=>this.#i.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state}removeQueries(e){let t=this.#i;o.Vr.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#i;return o.Vr.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(o.Vr.batch(()=>this.#i.findAll(e).map(e=>e.cancel(n)))).then(r.ZT).catch(r.ZT)}invalidateQueries(e,t={}){return o.Vr.batch(()=>(this.#i.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(o.Vr.batch(()=>this.#i.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(r.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r.ZT)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#i.build(this,t);return n.isStaleByTime((0,r.KC)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r.ZT).catch(r.ZT)}fetchInfiniteQuery(e){return e.behavior=h(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r.ZT).catch(r.ZT)}ensureInfiniteQueryData(e){return e.behavior=h(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return f.N.isOnline()?this.#o.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#i}getMutationCache(){return this.#o}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#a.set((0,r.Ym)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#a.values()],n={};return t.forEach(t=>{(0,r.to)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#u.set((0,r.Ym)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#u.values()],n={};return t.forEach(t=>{(0,r.to)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,r.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===r.CN&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#i.clear(),this.#o.clear()}}({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e4}}})},2003:function(e,t,n){"use strict";n.d(t,{N:function(){return o},R:function(){return r}});let r={groups:"groups",expenses:"expenses",members:"members",documents:"documents",syncQueue:"syncQueue",tripPackages:"tripPackages"};class i{async init(){return new Promise((e,t)=>{let n=indexedDB.open("TravelManagementDB",1);n.onerror=()=>{console.error("[OfflineDB] Error opening database"),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("[OfflineDB] Database opened successfully"),e()},n.onupgradeneeded=e=>{let t=e.target.result;if(console.log("[OfflineDB] Upgrading database..."),t.objectStoreNames.contains(r.groups)||t.createObjectStore(r.groups,{keyPath:"id"}).createIndex("updatedAt","updatedAt",{unique:!1}),t.objectStoreNames.contains(r.expenses)||t.createObjectStore(r.expenses,{keyPath:"id"}).createIndex("groupId","groupId",{unique:!1}),t.objectStoreNames.contains(r.members)||t.createObjectStore(r.members,{keyPath:"id"}).createIndex("groupId","groupId",{unique:!1}),t.objectStoreNames.contains(r.documents)||t.createObjectStore(r.documents,{keyPath:"id"}).createIndex("groupId","ownerId",{unique:!1}),!t.objectStoreNames.contains(r.syncQueue)){let e=t.createObjectStore(r.syncQueue,{keyPath:"id",autoIncrement:!0});e.createIndex("status","status",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}t.objectStoreNames.contains(r.tripPackages)||t.createObjectStore(r.tripPackages,{keyPath:"groupId"}).createIndex("downloadedAt","downloadedAt",{unique:!1}),console.log("[OfflineDB] Database upgrade complete")}})}async get(e,t){return this.db||await this.init(),new Promise((n,r)=>{let i=this.db.transaction([e],"readonly").objectStore(e).get(t);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async getAll(e){return this.db||await this.init(),new Promise((t,n)=>{let r=this.db.transaction([e],"readonly").objectStore(e).getAll();r.onsuccess=()=>t(r.result),r.onerror=()=>n(r.error)})}async getByIndex(e,t,n){return this.db||await this.init(),new Promise((r,i)=>{let o=this.db.transaction([e],"readonly").objectStore(e).index(t).getAll(n);o.onsuccess=()=>r(o.result),o.onerror=()=>i(o.error)})}async put(e,t){return this.db||await this.init(),new Promise((n,r)=>{let i=this.db.transaction([e],"readwrite").objectStore(e).put(t);i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async delete(e,t){return this.db||await this.init(),new Promise((n,r)=>{let i=this.db.transaction([e],"readwrite").objectStore(e).delete(t);i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async clear(e){return this.db||await this.init(),new Promise((t,n)=>{let r=this.db.transaction([e],"readwrite").objectStore(e).clear();r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}async addToSyncQueue(e){let t={...e,status:"pending",createdAt:new Date().toISOString(),retries:0};if(await this.put(r.syncQueue,t),console.log("[OfflineDB] Added to sync queue:",t),"serviceWorker"in navigator&&"SyncManager"in window)try{let e=await navigator.serviceWorker.ready;await e.sync.register("sync-queue"),console.log("[OfflineDB] Registered background sync")}catch(e){console.log("[OfflineDB] Background sync not supported")}}async getPendingSyncItems(){return this.getByIndex(r.syncQueue,"status","pending")}async markSyncItemComplete(e){let t=await this.get(r.syncQueue,e);t&&await this.put(r.syncQueue,{...t,status:"completed"})}async markSyncItemFailed(e){let t=await this.get(r.syncQueue,e);t&&await this.put(r.syncQueue,{...t,status:"failed",retries:(t.retries||0)+1})}constructor(){this.db=null}}let o=new i;o.init().catch(console.error)},4050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(5893),i=n(9008),o=n.n(i),s=n(7294),a=n(202),u=n(8111),c=n(716),l=n(1163),d=n(3313),f=n(8176),h=n(81);function p(){let e=(0,l.useRouter)(),{isSyncing:t,pendingJobs:n}=(0,h._)(),[i,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{o(navigator.onLine);let e=()=>o(!0),t=()=>o(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),["/","/login","/signup","/auth/login","/auth/signup"].includes(e.pathname))?null:(0,r.jsx)("div",{className:"sticky top-0 z-30 w-full bg-slate-900 text-xs text-white",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-4 py-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[i?(0,r.jsx)(d.Z,{className:"h-4 w-4"}):(0,r.jsx)(f.Z,{className:"h-4 w-4 text-amber-300"}),(0,r.jsx)("span",{children:i?"Mesh connected":"Offline mode"})]}),(0,r.jsx)("span",{children:t?"Syncing...":n>0?"".concat(n," pending changes"):"All changes synced"})]})})}var y=n(3552),v=n(8154);function m(){let{installPrompt:e,promptInstall:t,isInstalled:n}=function(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(!1);(0,s.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches&&r(!0);let e=e=>{e.preventDefault(),t(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("beforeinstallprompt",e)},[]);let i=async()=>{if(!e)return;e.prompt();let{outcome:n}=await e.userChoice;"accepted"===n&&(t(null),r(!0))};return{installPrompt:e,promptInstall:i,isInstalled:n}}(),[i,o]=(0,s.useState)(!1);(0,s.useEffect)(()=>{localStorage.getItem("install-prompt-dismissed")&&o(!0)},[]);let a=()=>{o(!0),localStorage.setItem("install-prompt-dismissed","true")},u=async()=>{await t(),o(!0)};return n||!e||i?null:(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 border-t border-primary-200 bg-primary-50 p-4 shadow-lg md:bottom-4 md:left-4 md:right-auto md:max-w-md md:rounded-lg md:border",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 rounded-full bg-primary-600 p-2 text-white",children:(0,r.jsx)(y.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:"Install Travel Management"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-600",children:"Add to your home screen for quick access and offline functionality"}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,r.jsx)("button",{onClick:u,className:"rounded-md bg-primary-600 px-4 py-2 text-xs font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Install App"}),(0,r.jsx)("button",{onClick:a,className:"rounded-md border border-slate-300 px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2",children:"Not Now"})]})]}),(0,r.jsx)("button",{onClick:a,className:"flex-shrink-0 rounded-md p-1 text-slate-400 hover:bg-slate-200 hover:text-slate-600","aria-label":"Dismiss",children:(0,r.jsx)(v.Z,{className:"h-4 w-4"})})]})})}var g=n(6471);let b="true"===n(3454).env.NEXT_PUBLIC_ENABLE_DEMO_DATA;function S(e){let{children:t}=e;return!function(){let{groups:e,addGroup:t}=(0,g.q)();(0,s.useEffect)(()=>{if(!b||Object.keys(e).length>0||window.localStorage.getItem("travel-management.tokens"))return;let n=new Date,r=new Date(Date.now()+6048e5);t({id:"demo",title:"Alpine Rescue Readiness",description:"Training expedition covering glacier rescue protocols and mesh comms drills.",destination:"Zermatt, Switzerland",startDate:n.toISOString(),endDate:r.toISOString(),isPublic:!1,inviteCode:"ALPINE",admins:[1],members:[{id:1,email:"captain@travel.app",phone:"+41791234567",role:{id:1,name:"admin"},createdAt:n.toISOString(),bloodGroup:"O+",emergencyContact:"Ops HQ +41790000000",status:"active"},{id:2,email:"medic@travel.app",phone:"+41797654321",role:{id:2,name:"member"},createdAt:n.toISOString(),bloodGroup:"A-",emergencyContact:"Clinic +41795553333",status:"active"}],expenses:[{id:"exp-1",groupId:"demo",title:"Avalanche beacons",category:"gear",currency:"USD",amount:1200,splits:[{memberId:1,amount:600},{memberId:2,amount:600}],paidBy:1,incurredOn:n.toISOString(),createdAt:n.toISOString()}],financeSummary:{totalExpenses:1200,totalMembers:2,outstandingBalance:0},documents:[{id:"doc-1",ownerType:"group",ownerId:"demo",groupId:"demo",title:"Insurance Certificate",description:"Coverage for alpine operations",fileType:"pdf",fileSize:102400,storageKey:"documents/demo/insurance.pdf",createdAt:n.toISOString(),createdBy:1,isEncrypted:!0}],itinerary:[{id:"it-1",groupId:"demo",title:"Crevasse rescue drills",description:"Field exercise with beacon relay",location:"Gorner Glacier",startsAt:new Date(Date.now()+864e5).toISOString(),endsAt:new Date(Date.now()+972e5).toISOString(),tags:["safety","training"]}],offlinePackages:[{id:"alps",name:"Swiss Alps terrain",region:"Europe",sizeMB:512,status:"downloaded",updatedAt:n.toISOString()}],emergencyContacts:[{id:"ec-1",name:"Swiss Rescue",phone:"+41799553322"}],invites:[{id:"invite-1",code:"ALPINE",createdAt:n.toISOString(),createdBy:1,usedCount:3}]})},[t,e])}(),(0,s.useEffect)(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered:",e)}).catch(e=>{console.log("SW registration failed:",e)})})},[]),(0,r.jsx)(r.Fragment,{children:t})}function w(e){let{Component:t,pageProps:n}=e;return(0,r.jsx)(a.aH,{client:c.E,children:(0,r.jsx)(u.H,{children:(0,r.jsxs)(S,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"Travel Management"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes"}),(0,r.jsx)("meta",{name:"description",content:"Coordinate group trips, manage expenses, and stay connected even when offline"})]}),(0,r.jsx)(p,{}),(0,r.jsx)(m,{}),(0,r.jsx)(t,{...n})]})})})}n(1784),n(1720)},6471:function(e,t,n){"use strict";let r;n.d(t,{q:function(){return _}});let i=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,i,o);return o},o=e=>e?i(e):i;var s,a,u=n(7294),c=n(2798);let{useDebugValue:l}=u,{useSyncExternalStoreWithSelector:d}=c,f=!1,h=e=>e,p=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?o(e):e,n=(e,n)=>(function(e,t=h,n){n&&!f&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),f=!0);let r=d(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r})(t,e,n);return Object.assign(n,t),n},y=new Map,v=e=>{let t=y.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},m=(e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};let r=y.get(n.name);if(r)return{type:"tracked",store:e,...r};let i={connection:t.connect(n),stores:{}};return y.set(n.name,i),{type:"tracked",store:e,...i}},g=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==n&&t(n)};function b(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(r=n.getItem(e))?r:null;return o instanceof Promise?o.then(i):i(o)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}let S=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>S(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>S(t)(e)}}};var w=n(9483),O=n.n(w);let I=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t},E={groups:{},syncQueue:[],notifications:[{channel:"push",enabled:!0},{channel:"email",enabled:!0},{channel:"sms",enabled:!1},{channel:"in-app",enabled:!0}],lastSyncedAt:void 0},_=(r?p(r):p)(((e,t={})=>(n,r,i)=>{let o;let{enabled:s,anonymousActionType:a,store:u,...c}=t;try{o=(null==s||s)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!o)return s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);let{connection:l,...d}=m(u,o,c),f=!0;i.setState=(e,t,o)=>{let s=n(e,t);if(!f)return s;let d=void 0===o?{type:a||"anonymous"}:"string"==typeof o?{type:o}:o;return void 0===u?null==l||l.send(d,r()):null==l||l.send({...d,type:`${u}/${d.type}`},{...v(c.name),[u]:i.getState()}),s};let h=(...e)=>{let t=f;f=!1,n(...e),f=t},p=e(i.setState,r,i);if("untracked"===d.type?null==l||l.init(p):(d.stores[d.store]=i,null==l||l.init(Object.fromEntries(Object.entries(d.stores).map(([e,t])=>[e,e===d.store?p:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=!1,t=i.dispatch;i.dispatch=(...n)=>{"__setState"!==n[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...n)}}return l.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload){console.error("[zustand devtools middleware] Unsupported action format");return}return g(e.payload,e=>{if("__setState"===e.type){if(void 0===u){h(e.state);return}1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[u];if(null==t)return;JSON.stringify(i.getState())!==JSON.stringify(t)&&h(t);return}i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(h(p),void 0===u)return null==l?void 0:l.init(i.getState());return null==l?void 0:l.init(v(c.name));case"COMMIT":if(void 0===u){null==l||l.init(i.getState());break}return null==l?void 0:l.init(v(c.name));case"ROLLBACK":return g(e.state,e=>{if(void 0===u){h(e),null==l||l.init(i.getState());return}h(e[u]),null==l||l.init(v(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return g(e.state,e=>{if(void 0===u){h(e);return}JSON.stringify(i.getState())!==JSON.stringify(e[u])&&h(e[u])});case"IMPORT_STATE":{let{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;void 0===u?h(r):h(r[u]),null==l||l.send(null,n);break}case"PAUSE_RECORDING":return f=!f}return}}),p})((s=(e,t)=>({...E,setGroups:t=>{let n=t.reduce((e,t)=>(e[t.id]=t,e),{});e(e=>({...e,groups:n}))},setGroup:t=>{e(e=>({...e,groups:{...e.groups,[t.id]:t}}))},addGroup:n=>{var r,i,o,s,a,u,c,l,d,f,h,p,y,v;let m=null!==(o=n.id)&&void 0!==o?o:I(),g=new Date().toISOString(),b={...n,id:m,createdAt:null!==(s=n.createdAt)&&void 0!==s?s:g,updatedAt:g,financeSummary:null!==(c=n.financeSummary)&&void 0!==c?c:{totalExpenses:null!==(a=null===(r=n.expenses)||void 0===r?void 0:r.reduce((e,t)=>e+t.amount,0))&&void 0!==a?a:0,totalMembers:null!==(u=null===(i=n.members)||void 0===i?void 0:i.length)&&void 0!==u?u:0,outstandingBalance:0},expenses:null!==(l=n.expenses)&&void 0!==l?l:[],documents:null!==(d=n.documents)&&void 0!==d?d:[],itinerary:null!==(f=n.itinerary)&&void 0!==f?f:[],offlinePackages:null!==(h=n.offlinePackages)&&void 0!==h?h:[],emergencyContacts:null!==(p=n.emergencyContacts)&&void 0!==p?p:[],invites:null!==(y=n.invites)&&void 0!==y?y:[],members:null!==(v=n.members)&&void 0!==v?v:[]};return e(e=>({groups:{...e.groups,[m]:b},syncQueue:[...e.syncQueue,{id:I(),type:"create",entity:"group",payload:b,createdAt:g,status:"pending"}]})),t().groups[m]},updateGroup:(t,n)=>{e(e=>{let r=e.groups[t];if(!r)return e;let i={...r,...n,updatedAt:new Date().toISOString()};return{...e,groups:{...e.groups,[t]:i},syncQueue:[...e.syncQueue,{id:I(),type:"update",entity:"group",payload:{id:t,...n},createdAt:new Date().toISOString(),status:"pending"}]}})},removeGroup:t=>{e(e=>{if(!e.groups[t])return e;let{[t]:n,...r}=e.groups;return{...e,groups:r,syncQueue:[...e.syncQueue,{id:I(),type:"delete",entity:"group",payload:{id:t},createdAt:new Date().toISOString(),status:"pending"}]}})},addExpense:(t,n)=>{let r={id:I(),createdAt:new Date().toISOString(),...n};return e(e=>{let n=e.groups[t];if(!n)return e;let i=[r,...n.expenses],o=i.reduce((e,t)=>e+t.amount,0);return{...e,groups:{...e.groups,[t]:{...n,expenses:i,financeSummary:{...n.financeSummary,totalExpenses:o,outstandingBalance:Math.max(0,o-i.reduce((e,t)=>e+t.splits.reduce((e,t)=>e+t.amount,0),0))},updatedAt:new Date().toISOString()}},syncQueue:[...e.syncQueue,{id:I(),type:"create",entity:"expense",payload:{groupId:t,expense:r},createdAt:new Date().toISOString(),status:"pending"}]}}),r},removeExpense:(t,n)=>{e(e=>{let r=e.groups[t];if(!r)return e;let i=r.expenses.filter(e=>e.id!==n),o=i.reduce((e,t)=>e+t.amount,0);return{...e,groups:{...e.groups,[t]:{...r,expenses:i,financeSummary:{...r.financeSummary,totalExpenses:o},updatedAt:new Date().toISOString()}},syncQueue:[...e.syncQueue,{id:I(),type:"delete",entity:"expense",payload:{groupId:t,expenseId:n},createdAt:new Date().toISOString(),status:"pending"}]}})},addDocument:(t,n)=>{let r={id:I(),createdAt:new Date().toISOString(),...n};return e(e=>{let n=e.groups[t];return n?{...e,groups:{...e.groups,[t]:{...n,documents:[r,...n.documents],updatedAt:new Date().toISOString()}},syncQueue:[...e.syncQueue,{id:I(),type:"create",entity:"document",payload:{groupId:t,document:r},createdAt:new Date().toISOString(),status:"pending"}]}:e}),r},removeDocument:(t,n)=>{e(e=>{let r=e.groups[t];return r?{...e,groups:{...e.groups,[t]:{...r,documents:r.documents.filter(e=>e.id!==n),updatedAt:new Date().toISOString()}},syncQueue:[...e.syncQueue,{id:I(),type:"delete",entity:"document",payload:{groupId:t,documentId:n},createdAt:new Date().toISOString(),status:"pending"}]}:e})},addItineraryItem:(t,n)=>{let r={id:I(),...n};return e(e=>{let n=e.groups[t];return n?{...e,groups:{...e.groups,[t]:{...n,itinerary:[...n.itinerary,r].sort((e,t)=>new Date(e.startsAt).getTime()-new Date(t.startsAt).getTime()),updatedAt:new Date().toISOString()}},syncQueue:[...e.syncQueue,{id:I(),type:"create",entity:"itinerary",payload:{groupId:t,item:r},createdAt:new Date().toISOString(),status:"pending"}]}:e}),r},updateOfflinePackage:(t,n)=>{e(e=>{let r=e.groups[t];if(!r)return e;let i=[...r.offlinePackages],o=i.findIndex(e=>e.id===n.id);return o>=0?i[o]=n:i.push(n),{...e,groups:{...e.groups,[t]:{...r,offlinePackages:i,updatedAt:new Date().toISOString()}}}})},enqueueSync:t=>{e(e=>({...e,syncQueue:[...e.syncQueue,{id:I(),createdAt:new Date().toISOString(),status:"pending",...t}]}))},markJobSynced:t=>{e(e=>({...e,syncQueue:e.syncQueue.map(e=>e.id===t?{...e,status:"synced",lastTriedAt:new Date().toISOString()}:e),lastSyncedAt:new Date().toISOString()}))},markJobFailed:(t,n)=>{e(e=>({...e,syncQueue:e.syncQueue.map(e=>e.id===t?{...e,status:"failed",error:n,lastTriedAt:new Date().toISOString()}:e)}))},setNotifications:t=>{e({notifications:t})},reset:()=>{e(E)}}),"getStorage"in(a={name:"travel-management-app",storage:b(()=>O()),partialize:e=>({groups:e.groups,syncQueue:e.syncQueue,notifications:e.notifications,lastSyncedAt:e.lastSyncedAt})})||"serialize"in a||"deserialize"in a?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),(e,t,n)=>{let r,i,o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},u=!1,c=new Set,l=new Set;try{r=o.getStorage()}catch(e){}if(!r)return s((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...t)},t,n);let d=S(o.serialize),f=()=>{let e;let n=d({state:o.partialize({...t()}),version:o.version}).then(e=>r.setItem(o.name,e)).catch(t=>{e=t});if(e)throw e;return n},h=n.setState;n.setState=(e,t)=>{h(e,t),f()};let p=s((...t)=>{e(...t),f()},t,n),y=()=>{var n;if(!r)return;u=!1,c.forEach(e=>e(t()));let s=(null==(n=o.onRehydrateStorage)?void 0:n.call(o,t()))||void 0;return S(r.getItem.bind(r))(o.name).then(e=>{if(e)return o.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(n=>{var r;return e(i=o.merge(n,null!=(r=t())?r:p),!0),f()}).then(()=>{null==s||s(i,void 0),u=!0,l.forEach(e=>e(i))}).catch(e=>{null==s||s(void 0,e)})};return n.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(r=e.getStorage())},clearStorage:()=>{null==r||r.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>u,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},y(),i||p}):(e,t,n)=>{let r,i={storage:b(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},o=!1,u=new Set,c=new Set,l=i.storage;if(!l)return s((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...t)},t,n);let d=()=>{let e=i.partialize({...t()});return l.setItem(i.name,{state:e,version:i.version})},f=n.setState;n.setState=(e,t)=>{f(e,t),d()};let h=s((...t)=>{e(...t),d()},t,n);n.getInitialState=()=>h;let p=()=>{var n,s;if(!l)return;o=!1,u.forEach(e=>{var n;return e(null!=(n=t())?n:h)});let a=(null==(s=i.onRehydrateStorage)?void 0:s.call(i,null!=(n=t())?n:h))||void 0;return S(l.getItem.bind(l))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate)return[!0,i.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(n=>{var o;let[s,a]=n;if(e(r=i.merge(a,null!=(o=t())?o:h),!0),s)return d()}).then(()=>{null==a||a(r,void 0),r=t(),o=!0,c.forEach(e=>e(r))}).catch(e=>{null==a||a(void 0,e)})};return n.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||p(),r||h})))},1720:function(){},1784:function(){},7663:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u=[],c=!1,l=-1;function d(){c&&r&&(c=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||c||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},s=!0;try{t[e](o,o.exports,r),s=!1}finally{s&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},9008:function(e,t,n){e.exports=n(7828)},1163:function(e,t,n){e.exports=n(9090)},83:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return a(function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})},[e,n,t]),s(function(){return c(i)&&l({inst:i}),e(function(){c(i)&&l({inst:i})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},6251:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i=n(1688),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=s(e,(d=c(function(){function e(e){if(!u){if(u=!0,s=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,a=n)}var s,a,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]))[0],d[1]);return u(function(){f.hasValue=!0,f.value=h},[h]),l(h),h}},1688:function(e,t,n){"use strict";e.exports=n(83)},2798:function(e,t,n){"use strict";e.exports=n(6251)},6474:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(7506),i=n(4139),o=new class extends r.l{#f;#h;#p;constructor(){super(),this.#p=e=>{if(!i.sk&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#h||this.setEventListener(this.#p)}onUnsubscribe(){this.hasListeners()||(this.#h?.(),this.#h=void 0)}setEventListener(e){this.#p=e,this.#h?.(),this.#h=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#f!==e&&(this.#f=e,this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#f?this.#f:globalThis.document?.visibilityState!=="hidden"}}},9289:function(e,t,n){"use strict";n.d(t,{R:function(){return a},m:function(){return s}});var r=n(7037),i=n(8907),o=n(2008),s=class extends i.F{#y;#v;#o;#m;constructor(e){super(),this.#y=e.client,this.mutationId=e.mutationId,this.#o=e.mutationCache,this.#v=[],this.state=e.state||a(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#v.includes(e)||(this.#v.push(e),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#v=this.#v.filter(t=>t!==e),this.scheduleGc(),this.#o.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#v.length||("pending"===this.state.status?this.scheduleGc():this.#o.remove(this))}continue(){return this.#m?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#g({type:"continue"})},n={client:this.#y,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#m=(0,o.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#g({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#g({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#o.canRun(this)});let r="pending"===this.state.status,i=!this.#m.canStart();try{if(r)t();else{this.#g({type:"pending",variables:e,isPaused:i}),await this.#o.config.onMutate?.(e,this,n);let t=await this.options.onMutate?.(e,n);t!==this.state.context&&this.#g({type:"pending",context:t,variables:e,isPaused:i})}let o=await this.#m.start();return await this.#o.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#o.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#g({type:"success",data:o}),o}catch(t){try{throw await this.#o.config.onError?.(t,e,this.state.context,this,n),await this.options.onError?.(t,e,this.state.context,n),await this.#o.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,t,e,this.state.context,n),t}finally{this.#g({type:"error",error:t})}}finally{this.#o.runNext(this)}}#g(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),r.Vr.batch(()=>{this.#v.forEach(t=>{t.onMutationUpdate(e)}),this.#o.notify({mutation:this,type:"updated",action:e})})}};function a(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},7037:function(e,t,n){"use strict";n.d(t,{Vr:function(){return i}});var r=n(2142).Hp,i=function(){let e=[],t=0,n=e=>{e()},i=e=>{e()},o=r,s=r=>{t?e.push(r):o(()=>{n(r)})},a=()=>{let t=e;e=[],t.length&&o(()=>{i(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{--t||a()}return n},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{i=e},setScheduler:e=>{o=e}}}()},4304:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(7506),i=n(4139),o=new class extends r.l{#b=!0;#h;#p;constructor(){super(),this.#p=e=>{if(!i.sk&&window.addEventListener){let t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#h||this.setEventListener(this.#p)}onUnsubscribe(){this.hasListeners()||(this.#h?.(),this.#h=void 0)}setEventListener(e){this.#p=e,this.#h?.(),this.#h=e(this.setOnline.bind(this))}setOnline(e){this.#b!==e&&(this.#b=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#b}}},6888:function(e,t,n){"use strict";n.d(t,{A:function(){return a},z:function(){return u}});var r=n(4139),i=n(7037),o=n(2008),s=n(8907),a=class extends s.F{#S;#w;#O;#y;#m;#s;#I;constructor(e){super(),this.#I=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#y=e.client,this.#O=this.#y.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#S=c(this.options),this.state=e.state??this.#S,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#m?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let e=c(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#S=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#O.remove(this)}setData(e,t){let n=(0,r.oE)(this.state.data,e,this.options);return this.#g({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#g({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#m?.promise;return this.#m?.cancel(e),t?t.then(r.ZT).catch(r.ZT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#S)}isActive(){return this.observers.some(e=>!1!==(0,r.Nc)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===r.CN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,r.KC)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,r.Kp)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#m?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#m?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#O.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#m&&(this.#I?this.#m.cancel({revert:!0}):this.#m.cancelRetry()),this.scheduleGc()),this.#O.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#g({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&this.#m?.status()!=="rejected"){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#m)return this.#m.continueRetry(),this.#m.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let n=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#I=!0,n.signal)})},s=()=>{let e=(0,r.cG)(this.options,t),n=(()=>{let e={client:this.#y,queryKey:this.queryKey,meta:this.meta};return i(e),e})();return(this.#I=!1,this.options.persister)?this.options.persister(e,n,this):e(n)},a=(()=>{let e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#y,state:this.state,fetchFn:s};return i(e),e})();this.options.behavior?.onFetch(a,this),this.#w=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#g({type:"fetch",meta:a.fetchOptions?.meta}),this.#m=(0,o.Mz)({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:e=>{e instanceof o.p8&&e.revert&&this.setState({...this.#w,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#g({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#g({type:"pause"})},onContinue:()=>{this.#g({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{let e=await this.#m.start();if(void 0===e)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#O.config.onSuccess?.(e,this),this.#O.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof o.p8){if(e.silent)return this.#m.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#g({type:"error",error:e}),this.#O.config.onError?.(e,this),this.#O.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#g(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...u(t.data,this.options),fetchMeta:e.meta??null};case"success":let n={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#w=e.manual?n:void 0,n;case"error":let r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),i.Vr.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#O.notify({query:this,type:"updated",action:e})})}};function u(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,o.Kw)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function c(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}},8907:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(2142),i=n(4139),o=class{#E;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,i.PN)(this.gcTime)&&(this.#E=r.mr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(i.sk?1/0:3e5))}clearGcTimeout(){this.#E&&(r.mr.clearTimeout(this.#E),this.#E=void 0)}}},2008:function(e,t,n){"use strict";n.d(t,{Kw:function(){return u},Mz:function(){return l},p8:function(){return c}});var r=n(6474),i=n(4304),o=n(3820),s=n(4139);function a(e){return Math.min(1e3*2**e,3e4)}function u(e){return(e??"online")!=="online"||i.N.isOnline()}var c=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function l(e){let t,n=!1,l=0,d=(0,o.O)(),f=()=>"pending"!==d.status,h=()=>r.j.isFocused()&&("always"===e.networkMode||i.N.isOnline())&&e.canRun(),p=()=>u(e.networkMode)&&e.canRun(),y=e=>{f()||(t?.(),d.resolve(e))},v=e=>{f()||(t?.(),d.reject(e))},m=()=>new Promise(n=>{t=e=>{(f()||h())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,f()||e.onContinue?.()}),g=()=>{let t;if(f())return;let r=0===l?e.initialPromise:void 0;try{t=r??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(y).catch(t=>{if(f())return;let r=e.retry??(s.sk?0:3),i=e.retryDelay??a,o="function"==typeof i?i(l,t):i,u=!0===r||"number"==typeof r&&l<r||"function"==typeof r&&r(l,t);if(n||!u){v(t);return}l++,e.onFail?.(l,t),(0,s._v)(o).then(()=>h()?void 0:m()).then(()=>{n?v(t):g()})})};return{promise:d,status:()=>d.status,cancel:t=>{if(!f()){let n=new c(t);v(n),e.onCancel?.(n)}},continue:()=>(t?.(),d),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:p,start:()=>(p()?g():m().then(g),d)}}},7506:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var r=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},3820:function(e,t,n){"use strict";function r(){let e,t;let n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}n.d(t,{O:function(){return r}})},2142:function(e,t,n){"use strict";n.d(t,{Hp:function(){return o},mr:function(){return i}});var r={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},i=new class{#_=r;#x=!1;setTimeoutProvider(e){this.#_=e}setTimeout(e,t){return this.#_.setTimeout(e,t)}clearTimeout(e){this.#_.clearTimeout(e)}setInterval(e,t){return this.#_.setInterval(e,t)}clearInterval(e){this.#_.clearInterval(e)}};function o(e){setTimeout(e,0)}},4139:function(e,t,n){"use strict";n.d(t,{CN:function(){return _},Ht:function(){return E},KC:function(){return c},Kp:function(){return u},L3:function(){return k},Nc:function(){return l},PN:function(){return a},Rm:function(){return h},SE:function(){return s},VS:function(){return m},VX:function(){return I},X7:function(){return f},Ym:function(){return p},ZT:function(){return o},_v:function(){return w},_x:function(){return d},cG:function(){return x},oE:function(){return O},sk:function(){return i},to:function(){return y}});var r=n(2142),i="undefined"==typeof window||"Deno"in globalThis;function o(){}function s(e,t){return"function"==typeof e?e(t):e}function a(e){return"number"==typeof e&&e>=0&&e!==1/0}function u(e,t){return Math.max(e+(t||0)-Date.now(),0)}function c(e,t){return"function"==typeof e?e(t):e}function l(e,t){return"function"==typeof e?e(t):e}function d(e,t){let{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==h(s,t.options))return!1}else if(!y(t.queryKey,s))return!1}if("all"!==n){let e=t.isActive();if("active"===n&&!e||"inactive"===n&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&(!i||i===t.state.fetchStatus)&&(!o||!!o(t))}function f(e,t){let{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(p(t.options.mutationKey)!==p(o))return!1}else if(!y(t.options.mutationKey,o))return!1}return(!r||t.state.status===r)&&(!i||!!i(t))}function h(e,t){return(t?.queryKeyHashFn||p)(e)}function p(e){return JSON.stringify(e,(e,t)=>b(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function y(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).every(n=>y(e[n],t[n]))}var v=Object.prototype.hasOwnProperty;function m(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}function g(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function b(e){if(!S(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(S(n)&&n.hasOwnProperty("isPrototypeOf"))&&Object.getPrototypeOf(e)===Object.prototype}function S(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return new Promise(t=>{r.mr.setTimeout(t,e)})}function O(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?function e(t,n){if(t===n)return t;let r=g(t)&&g(n);if(!r&&!(b(t)&&b(n)))return n;let i=(r?t:Object.keys(t)).length,o=r?n:Object.keys(n),s=o.length,a=r?Array(s):{},u=0;for(let c=0;c<s;c++){let s=r?c:o[c],l=t[s],d=n[s];if(l===d){a[s]=l,(r?c<i:v.call(t,s))&&u++;continue}if(null===l||null===d||"object"!=typeof l||"object"!=typeof d){a[s]=d;continue}let f=e(l,d);a[s]=f,f===l&&u++}return i===s&&u===i?t:a}(e,t):t}function I(e,t,n=0){let r=[...e,t];return n&&r.length>n?r.slice(1):r}function E(e,t,n=0){let r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var _=Symbol();function x(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==_?e.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${e.queryHash}'`))}function k(e,t){return"function"==typeof e?e(...t):!!e}},202:function(e,t,n){"use strict";n.d(t,{NL:function(){return s},aH:function(){return a}});var r=n(7294),i=n(5893),o=r.createContext(void 0),s=e=>{let t=r.useContext(o);if(e)return e;if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},a=({client:e,children:t})=>(r.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),(0,i.jsx)(o.Provider,{value:e,children:t}))}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(9090)}),_N_E=e.O()}]);