"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{2417:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(5893),i=r(7294),a=r(801);let s={primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"border border-primary-600 text-primary-600 hover:bg-primary-50",subtle:"bg-slate-100 text-slate-700 hover:bg-slate-200",ghost:"text-slate-600 hover:bg-slate-100",danger:"bg-red-600 text-white hover:bg-red-700"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"},o=i.forwardRef((e,t)=>{let{as:r="button",asChild:i,href:o,className:d,variant:l="primary",size:c="md",loadingText:y,isLoading:p,disabled:m,children:g,...v}=e,f=(0,a.cn)("inline-flex items-center justify-center rounded-md font-medium transition focus:outline-none focus:ring-2 focus:ring-primary-200 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",s[l],u[c],d),{form:b,formAction:x,formEncType:h,formMethod:q,formNoValidate:S,formTarget:w,type:K,value:N,...A}=v;return"a"===r?(0,n.jsx)("a",{ref:t,href:o,className:f,"aria-disabled":m||p,...A,children:p?null!=y?y:"Loading...":g}):(0,n.jsx)("button",{ref:t,disabled:m||p,className:f,...v,children:p?null!=y?y:"Loading...":g})});o.displayName="Button"},8701:function(e,t,r){r.d(t,{xH:function(){return f},Qc:function(){return x},mm:function(){return g},CB:function(){return S},Ui:function(){return K},i4:function(){return q},hA:function(){return h},xR:function(){return m},RW:function(){return p},Iw:function(){return v},D0:function(){return w},er:function(){return b}});var n=r(3934),i=r(202),a=r(8029),s=r(8111),u=r(6471);let o=e=>{var t,r,n,i;return{id:e.user.id,email:e.user.email,phone:e.user.phone,photoUrl:null!==(t=e.user.photoUrl)&&void 0!==t?t:null,bloodGroup:null!==(r=e.user.bloodGroup)&&void 0!==r?r:null,emergencyContact:null!==(n=e.user.emergencyContact)&&void 0!==n?n:null,createdAt:e.joinedAt,role:null,displayName:null!==(i=e.displayName)&&void 0!==i?i:e.user.email,status:e.status}},d=(e,t)=>{var r;return{id:String(t.id),groupId:e,title:t.title,description:null!==(r=t.description)&&void 0!==r?r:void 0,category:t.category,currency:t.currency,amount:t.amount,splits:t.splits.map(e=>({memberId:e.memberId,amount:e.amount})),paidBy:t.paidBy.id,incurredOn:t.incurredOn,receiptUrl:void 0,attachments:[],createdAt:t.createdAt}},l=e=>{var t,r;return{id:String(e.id),ownerType:e.ownerType,ownerId:e.ownerId,groupId:"group"===e.ownerType?String(e.ownerId):void 0,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:void 0,fileType:e.fileType,fileSize:e.fileSize,storageKey:e.storageKey,expiresAt:null!==(r=e.expiresAt)&&void 0!==r?r:void 0,createdAt:e.createdAt,createdBy:e.createdBy.id,isEncrypted:e.isEncrypted}},c=e=>{var t,r;return{id:String(e.id),code:e.code,expiresAt:null!==(t=e.expiresAt)&&void 0!==t?t:void 0,usageLimit:null!==(r=e.usageLimit)&&void 0!==r?r:void 0,usedCount:e.usedCount,createdAt:e.createdAt,createdBy:e.createdBy.id}},y=e=>{var t,r,n,i,a,s,u;let y=String(e.id),p=e.members.map(o),m=e.expenses.map(e=>d(y,e)),g=e.documents.map(l);return{id:y,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:void 0,destination:e.destination,startDate:e.startDate,endDate:e.endDate,isPublic:e.isPublic,inviteCode:e.inviteCode,coverImage:null!==(r=e.coverImage)&&void 0!==r?r:void 0,guides:null!==(n=e.guides)&&void 0!==n?n:[],tags:null!==(i=e.tags)&&void 0!==i?i:[],createdAt:e.createdAt,updatedAt:e.updatedAt,admins:e.members.filter(e=>"admin"===e.role||"co-admin"===e.role).map(e=>e.user.id),financeSummary:{totalExpenses:e.financeSummary.totalExpenses,totalMembers:e.financeSummary.totalMembers,outstandingBalance:e.financeSummary.outstandingBalance},offlinePackages:null!==(a=e.offlinePackages)&&void 0!==a?a:[],members:p,documents:g,itinerary:null!==(s=e.itinerary)&&void 0!==s?s:[],emergencyContacts:null!==(u=e.emergencyContacts)&&void 0!==u?u:[],invites:e.invites.map(c),expenses:m}},p=()=>{let{authFetch:e}=(0,s.a)(),t=(0,u.q)(e=>e.setGroups);return(0,n.a)({queryKey:["groups"],queryFn:async()=>{let r=(await e("/groups")).map(y);return t(r),r},staleTime:3e4})},m=e=>{let{authFetch:t}=(0,s.a)(),r=(0,u.q)(e=>e.setGroup);return(0,n.a)({queryKey:["groups",e],enabled:!!e,queryFn:async()=>{let n=y(await t("/groups/".concat(e)));return r(n),n},staleTime:3e4})},g=()=>{let{authFetch:e}=(0,s.a)(),t=(0,u.q)(e=>e.setGroup),r=(0,i.NL)();return(0,a.D)({mutationFn:async t=>y(await e("/groups",{method:"POST",body:JSON.stringify(t)})),onSuccess:e=>{t(e),r.invalidateQueries({queryKey:["groups"]}),r.invalidateQueries({queryKey:["groups",e.id]})}})},v=e=>{let{authFetch:t}=(0,s.a)(),r=(0,i.NL)();return(0,a.D)({mutationFn:async r=>await t("/groups/".concat(e,"/invite"),{method:"POST",body:JSON.stringify(r)}),onSuccess:()=>{r.invalidateQueries({queryKey:["groups",e]}),r.invalidateQueries({queryKey:["groups"]})}})},f=e=>{let{authFetch:t}=(0,s.a)(),r=(0,i.NL)();return(0,a.D)({mutationFn:async r=>await t("/groups/".concat(e,"/members"),{method:"POST",body:JSON.stringify(r)}),onSuccess:()=>{r.invalidateQueries({queryKey:["groups",e]}),r.invalidateQueries({queryKey:["groups"]})}})},b=e=>{let{authFetch:t}=(0,s.a)(),r=(0,i.NL)();return(0,a.D)({mutationFn:async r=>(await t("/groups/".concat(e,"/members/").concat(r),{method:"DELETE"}),r),onSuccess:()=>{r.invalidateQueries({queryKey:["groups",e]}),r.invalidateQueries({queryKey:["groups"]})}})},x=e=>{let{authFetch:t}=(0,s.a)(),r=(0,i.NL)();return(0,a.D)({mutationFn:async r=>{if(!e)throw Error("Group id is required to create an expense");return t("/groups/".concat(e,"/expenses"),{method:"POST",body:JSON.stringify(r)})},onSuccess:(t,n,i)=>(e&&(r.invalidateQueries({queryKey:["groups",e]}),r.invalidateQueries({queryKey:["groups",e,"expenses"]}),r.invalidateQueries({queryKey:["groups",e,"balance"]}),r.invalidateQueries({queryKey:["groups"]})),i)})},h=e=>{let{authFetch:t}=(0,s.a)();return(0,n.a)({queryKey:["groups",e,"expenses"],enabled:!!e,queryFn:async()=>e?(await t("/groups/".concat(e,"/expenses"))).map(t=>d(e,t)):[],staleTime:15e3})},q=e=>{let{authFetch:t}=(0,s.a)();return(0,n.a)({queryKey:["groups",e,"balance"],enabled:!!e,queryFn:async()=>e?await t("/groups/".concat(e,"/balance")):null,staleTime:15e3})},S=()=>{let{authFetch:e}=(0,s.a)(),t=(0,i.NL)();return(0,a.D)({mutationFn:async t=>e("/expenses/personal",{method:"POST",body:JSON.stringify(t)}),onSuccess:()=>{t.invalidateQueries({queryKey:["personal-expenses"]})}})},w=()=>{let{authFetch:e}=(0,s.a)();return(0,n.a)({queryKey:["personal-expenses"],queryFn:async()=>await e("/expenses/personal"),staleTime:15e3})},K=()=>{let{authFetch:e}=(0,s.a)(),t=(0,i.NL)();return(0,a.D)({mutationFn:async t=>(await e("/expenses/personal/".concat(t),{method:"DELETE"}),t),onSuccess:()=>{t.invalidateQueries({queryKey:["personal-expenses"]})}})}}}]);