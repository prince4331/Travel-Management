"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{5677:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1462).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4061:function(e,s,a){a.r(s),a.d(s,{default:function(){return u}});var t=a(5893),l=a(7294);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(1462).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var i=a(759),r=a(5677),d=a(3552),c=a(9967),o=a(8154),x=a(2417),m=a(1064),h=a(1027);function u(e){let{onLocationSelect:s}=e,[a,u]=(0,l.useState)(""),[p,j]=(0,l.useState)(!1),[g,w]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[N,v]=(0,l.useState)(10),[y,k]=(0,l.useState)(!1),S=async()=>{if(a.trim()){j(!0);try{let e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(a),"&limit=5")),s=await e.json();w(s)}catch(e){console.error("Search failed:",e)}finally{j(!1)}}},B=e=>Math.round(Math.PI*e*e*.5),D=async e=>{var a;let t={id:Date.now().toString(),name:(null===(a=e.display_name)||void 0===a?void 0:a.split(",")[0])||e.name,lat:parseFloat(e.lat),lng:parseFloat(e.lon),radius:N,status:"downloading",progress:0,sizeMB:B(N)};b(e=>[t,...e]),s(t.lat,t.lng,t.name);let l=0,n=setInterval(()=>{if((l+=15*Math.random())>=100){if(l=100,clearInterval(n),b(e=>e.map(e=>e.id===t.id?{...e,status:"downloaded",progress:100}:e)),"indexedDB"in window){let e=indexedDB.open("offline-maps",1);e.onsuccess=e=>{e.target.result.transaction(["maps"],"readwrite").objectStore("maps").add({id:t.id,name:t.name,lat:t.lat,lng:t.lng,radius:t.radius,downloadedAt:new Date().toISOString(),sizeMB:t.sizeMB})},e.onupgradeneeded=e=>{let s=e.target.result;s.objectStoreNames.contains("maps")||s.createObjectStore("maps",{keyPath:"id"})}}}else b(e=>e.map(e=>e.id===t.id?{...e,progress:Math.round(l)}:e))},500)},M=e=>{b(s=>s.filter(s=>s.id!==e)),"indexedDB"in window&&(indexedDB.open("offline-maps",1).onsuccess=s=>{s.target.result.transaction(["maps"],"readwrite").objectStore("maps").delete(e)})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(m.Zb,{className:"border-white/50 bg-white/80 backdrop-blur-sm shadow-xl",children:[(0,t.jsx)(m.Ol,{children:(0,t.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-5 h-5 text-blue-600"}),"Download Custom Area"]})}),(0,t.jsxs)(m.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",value:a,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&S(),placeholder:"Search for a city, landmark, or address...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,t.jsxs)(x.z,{onClick:S,disabled:p||!a.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[p?(0,t.jsx)(i.Z,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(n,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"ml-2",children:"Search"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Download Radius:"}),(0,t.jsxs)("select",{value:N,onChange:e=>v(parseInt(e.target.value)),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:5,children:"5 km (~12 MB)"}),(0,t.jsx)("option",{value:10,children:"10 km (~50 MB)"}),(0,t.jsx)("option",{value:25,children:"25 km (~310 MB)"}),(0,t.jsx)("option",{value:50,children:"50 km (~1.2 GB)"}),(0,t.jsx)("option",{value:100,children:"100 km (~5 GB)"})]})]}),g.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Select a location:"}),g.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 hover:bg-slate-100 rounded-lg border border-slate-200 cursor-pointer transition",onClick:()=>{D(e),w([]),u("")},children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(r.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:null===(a=e.display_name)||void 0===a?void 0:a.split(",")[0]}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.display_name}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[parseFloat(e.lat).toFixed(4),", ",parseFloat(e.lon).toFixed(4)]})]})]}),(0,t.jsxs)(h.C,{variant:"info",className:"bg-blue-100 text-blue-700",children:["~",B(N)," MB"]})]},s)})]}),p&&(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(i.Z,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 mt-2",children:"Searching..."})]})]})]}),f.length>0&&(0,t.jsxs)(m.Zb,{className:"border-white/50 bg-white/80 backdrop-blur-sm shadow-xl",children:[(0,t.jsx)(m.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"w-5 h-5 text-green-600"}),"Downloaded Areas"]}),(0,t.jsxs)(h.C,{variant:"info",children:[f.length," areas"]})]})}),(0,t.jsx)(m.aY,{className:"space-y-3",children:f.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-gradient-to-r from-white to-slate-50 rounded-lg border border-slate-200 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center ".concat("downloaded"===e.status?"bg-green-500 text-white":"downloading"===e.status?"bg-blue-500 text-white":"bg-slate-300 text-slate-600"),children:"downloaded"===e.status?(0,t.jsx)(c.Z,{className:"w-5 h-5"}):"downloading"===e.status?(0,t.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(r.Z,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:[e.lat.toFixed(4),", ",e.lng.toFixed(4)," • ",e.radius," km radius"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(h.C,{variant:"downloaded"===e.status?"success":"info",className:"downloaded"===e.status?"bg-green-500 text-white":"bg-blue-500 text-white",children:[e.sizeMB," MB"]}),"downloaded"===e.status&&(0,t.jsx)("button",{onClick:()=>M(e.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete",children:(0,t.jsx)(o.Z,{className:"w-4 h-4"})})]})]}),"downloading"===e.status&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-slate-600",children:[(0,t.jsx)("span",{children:"Downloading map tiles..."}),(0,t.jsxs)("span",{children:[e.progress,"%"]})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})]}),"downloaded"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-green-600 mt-2",children:[(0,t.jsx)(c.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Available offline • Click on map to view"})]})]},e.id))})]}),(0,t.jsx)(m.Zb,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",children:(0,t.jsx)(m.aY,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"text-3xl",children:"\uD83D\uDCA1"}),(0,t.jsxs)("div",{className:"text-sm text-slate-700",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"How it works:"}),(0,t.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,t.jsx)("li",{children:"• Search for any location worldwide"}),(0,t.jsx)("li",{children:"• Select download radius (larger = more storage)"}),(0,t.jsx)("li",{children:"• Maps are cached in your browser for offline use"}),(0,t.jsx)("li",{children:"• Downloaded areas work without internet connection"}),(0,t.jsx)("li",{children:"• Storage is saved locally using IndexedDB"})]})]})]})})})]})}}}]);