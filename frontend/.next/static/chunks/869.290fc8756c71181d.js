"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{3869:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r,l,u,o,a,i,c=n(5893),s=n(7294);function f(e,t){return Object.freeze({...e,...t})}let d=(0,s.createContext)(null),p=d.Provider;function m(){let e=(0,s.useContext)(d);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var x=n(3935);function h(e){return(0,s.forwardRef)(function(t,n){let{instance:r,context:l}=e(t).current;return(0,s.useImperativeHandle)(n,()=>r),null==t.children?null:s.createElement(p,{value:l},t.children)})}function b(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function g(e,t){return null==t?function(t,n){let r=(0,s.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,s.useRef)();l.current||(l.current=e(n,r));let u=(0,s.useRef)(n),{instance:o}=l.current;return(0,s.useEffect)(function(){u.current!==n&&(t(o,n,u.current),u.current=n)},[o,n,r]),l}}function v(e,t){let n=(0,s.useRef)(t);(0,s.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function j(e,t){let n=(0,s.useRef)();(0,s.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function y(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function w(e,t){(0,s.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function C(e){return function(t){let n=m(),r=e(y(t,n),n);return v(n.map,t.attribution),j(r.current,t.eventHandlers),w(r.current,n),r}}var O=n(5243),N=n.n(O);let E=h((r=g(function({center:e,children:t,...n},r){let l=new O.Circle(e,n);return b(l,f(r,{overlayContainer:l}))},function(e,t,n){t.center!==n.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==n.radius&&e.setRadius(t.radius)}),function(e){let t=m(),n=r(y(e,t),t);return j(n.current,e.eventHandlers),w(n.current,t),function(e,t){let n=(0,s.useRef)();(0,s.useEffect)(function(){if(t.pathOptions!==n.current){let r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}(n.current,e),n})),I=h(C(g(function({position:e,...t},n){let r=new O.Marker(e,t);return b(r,f(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}))),L=(l=function(e,t){return b(new O.Popup(e,t.overlayContainer),t)},u=function(e,t,{position:n},r){(0,s.useEffect)(function(){let{instance:l}=e;function u(e){e.popup===l&&(l.update(),r(!0))}function o(e){e.popup===l&&r(!1)}return t.map.on({popupopen:u,popupclose:o}),null==t.overlayContainer?(null!=n&&l.setLatLng(n),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){t.map.off({popupopen:u,popupclose:o}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(l)}},[e,t,r,n])},o=g(l),a=function(e,t){let n=m(),r=o(y(e,n),n);return v(n.map,e.attribution),j(r.current,e.eventHandlers),u(r.current,n,e,t),r},(0,s.forwardRef)(function(e,t){let[n,r]=(0,s.useState)(!1),{instance:l}=a(e,r).current;(0,s.useImperativeHandle)(t,()=>l),(0,s.useEffect)(function(){n&&l.update()},[l,n,e.children]);let u=l._contentNode;return u?(0,x.createPortal)(e.children,u):null}));function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let k=(0,s.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:l,id:u,placeholder:o,style:a,whenReady:i,zoom:c,...f},d){let[m]=(0,s.useState)({className:l,id:u,style:a}),[x,h]=(0,s.useState)(null);(0,s.useImperativeHandle)(d,()=>x?.map??null,[x]);let b=(0,s.useCallback)(r=>{if(null!==r&&null===x){let l=new O.Map(r,f);null!=n&&null!=c?l.setView(n,c):null!=e&&l.fitBounds(e,t),null!=i&&l.whenReady(i),h(Object.freeze({__version:1,map:l}))}},[]);(0,s.useEffect)(()=>()=>{x?.map.remove()},[x]);let g=x?s.createElement(p,{value:x},r):o??null;return s.createElement("div",R({},m,{ref:b}),g)}),z=(i=C(g(function({url:e,...t},n){return b(new O.TileLayer(e,y(t,n)),n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})),(0,s.forwardRef)(function(e,t){let{instance:n}=i(e).current;return(0,s.useImperativeHandle)(t,()=>n),null}));function D(e){let{onLocationClick:t,enableDownloadSelection:n,downloadRadius:r=10}=e,[l,u]=(0,s.useState)(null);return(!function(e){let t=m().map;(0,s.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e])}({click:e=>{if(n&&t){let{lat:n,lng:r}=e.latlng;u([n,r]),t(n,r)}}}),n&&l)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(E,{center:l,radius:1e3*r,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.2,weight:2}}),(0,c.jsx)(I,{position:l,children:(0,c.jsx)(L,{children:(0,c.jsxs)("div",{className:"p-2",children:[(0,c.jsx)("h3",{className:"font-bold text-slate-900 mb-1",children:"\uD83D\uDCCD Selected Location"}),(0,c.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:'Click "Download This Area" to save offline'}),(0,c.jsxs)("div",{className:"text-xs text-slate-500",children:[l[0].toFixed(4),", ",l[1].toFixed(4)]}),(0,c.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Coverage: ",r," km radius"]})]})})})]}):null}function S(e){let{center:t,zoom:n}=e,r=m().map;return(0,s.useEffect)(()=>{r.setView(t,n)},[t,n,r]),null}function _(e){let{locations:t=[],center:n=[20,0],zoom:r=2,height:l="500px",enableDownloadSelection:u=!1,downloadRadius:o=10,onLocationClick:a}=e,[i,f]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{f(!0)},[]),i)?(0,c.jsx)("div",{style:{height:l},className:"rounded-lg overflow-hidden shadow-xl border border-white/50",children:(0,c.jsxs)(k,{center:n,zoom:r,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},className:"z-0",children:[(0,c.jsx)(S,{center:n,zoom:r}),(0,c.jsx)(z,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u&&(0,c.jsx)(D,{onLocationClick:a,enableDownloadSelection:u,downloadRadius:o}),t.map(e=>(0,c.jsx)(I,{position:[e.lat,e.lng],children:(0,c.jsx)(L,{children:(0,c.jsxs)("div",{className:"p-2",children:[(0,c.jsx)("h3",{className:"font-bold text-slate-900 mb-1",children:e.name}),e.description&&(0,c.jsx)("p",{className:"text-sm text-slate-600",children:e.description}),(0,c.jsxs)("div",{className:"mt-2 text-xs text-slate-500",children:["\uD83D\uDCCD ",e.lat.toFixed(4),", ",e.lng.toFixed(4)]})]})})},e.id))]})}):(0,c.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center",style:{height:l},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-3"}),(0,c.jsx)("p",{className:"text-sm text-slate-600",children:"Loading map..."})]})})}n(1720),delete N().Icon.Default.prototype._getIconUrl,N().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"})}}]);