(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{3976:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents",function(){return n(5192)}])},5930:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(1462).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1027:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(5893),a=n(801);let i={default:"bg-slate-100 text-slate-700",success:"bg-emerald-100 text-emerald-700",warning:"bg-amber-100 text-amber-700",danger:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700"};function s(e){let{className:t,variant:n="default",...s}=e;return(0,r.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",i[n],t),...s})}},8701:function(e,t,n){"use strict";n.d(t,{xH:function(){return f},Qc:function(){return h},mm:function(){return x},CB:function(){return w},Ui:function(){return q},i4:function(){return N},hA:function(){return b},xR:function(){return y},RW:function(){return m},Iw:function(){return g},D0:function(){return S},er:function(){return v}});var r=n(3934),a=n(202),i=n(8029),s=n(8111),u=n(6471);let o=e=>{var t,n,r,a;return{id:e.user.id,email:e.user.email,phone:e.user.phone,photoUrl:null!==(t=e.user.photoUrl)&&void 0!==t?t:null,bloodGroup:null!==(n=e.user.bloodGroup)&&void 0!==n?n:null,emergencyContact:null!==(r=e.user.emergencyContact)&&void 0!==r?r:null,createdAt:e.joinedAt,role:null,displayName:null!==(a=e.displayName)&&void 0!==a?a:e.user.email,status:e.status}},l=(e,t)=>{var n;return{id:String(t.id),groupId:e,title:t.title,description:null!==(n=t.description)&&void 0!==n?n:void 0,category:t.category,currency:t.currency,amount:t.amount,splits:t.splits.map(e=>({memberId:e.memberId,amount:e.amount})),paidBy:t.paidBy.id,incurredOn:t.incurredOn,receiptUrl:void 0,attachments:[],createdAt:t.createdAt}},d=e=>{var t,n;return{id:String(e.id),ownerType:e.ownerType,ownerId:e.ownerId,groupId:"group"===e.ownerType?String(e.ownerId):void 0,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:void 0,fileType:e.fileType,fileSize:e.fileSize,storageKey:e.storageKey,expiresAt:null!==(n=e.expiresAt)&&void 0!==n?n:void 0,createdAt:e.createdAt,createdBy:e.createdBy.id,isEncrypted:e.isEncrypted}},c=e=>{var t,n;return{id:String(e.id),code:e.code,expiresAt:null!==(t=e.expiresAt)&&void 0!==t?t:void 0,usageLimit:null!==(n=e.usageLimit)&&void 0!==n?n:void 0,usedCount:e.usedCount,createdAt:e.createdAt,createdBy:e.createdBy.id}},p=e=>{var t,n,r,a,i,s,u;let p=String(e.id),m=e.members.map(o),y=e.expenses.map(e=>l(p,e)),x=e.documents.map(d);return{id:p,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:void 0,destination:e.destination,startDate:e.startDate,endDate:e.endDate,isPublic:e.isPublic,inviteCode:e.inviteCode,coverImage:null!==(n=e.coverImage)&&void 0!==n?n:void 0,guides:null!==(r=e.guides)&&void 0!==r?r:[],tags:null!==(a=e.tags)&&void 0!==a?a:[],createdAt:e.createdAt,updatedAt:e.updatedAt,admins:e.members.filter(e=>"admin"===e.role||"co-admin"===e.role).map(e=>e.user.id),financeSummary:{totalExpenses:e.financeSummary.totalExpenses,totalMembers:e.financeSummary.totalMembers,outstandingBalance:e.financeSummary.outstandingBalance},offlinePackages:null!==(i=e.offlinePackages)&&void 0!==i?i:[],members:m,documents:x,itinerary:null!==(s=e.itinerary)&&void 0!==s?s:[],emergencyContacts:null!==(u=e.emergencyContacts)&&void 0!==u?u:[],invites:e.invites.map(c),expenses:y}},m=()=>{let{authFetch:e}=(0,s.a)(),t=(0,u.q)(e=>e.setGroups);return(0,r.a)({queryKey:["groups"],queryFn:async()=>{let n=(await e("/groups")).map(p);return t(n),n},staleTime:3e4})},y=e=>{let{authFetch:t}=(0,s.a)(),n=(0,u.q)(e=>e.setGroup);return(0,r.a)({queryKey:["groups",e],enabled:!!e,queryFn:async()=>{let r=p(await t("/groups/".concat(e)));return n(r),r},staleTime:3e4})},x=()=>{let{authFetch:e}=(0,s.a)(),t=(0,u.q)(e=>e.setGroup),n=(0,a.NL)();return(0,i.D)({mutationFn:async t=>p(await e("/groups",{method:"POST",body:JSON.stringify(t)})),onSuccess:e=>{t(e),n.invalidateQueries({queryKey:["groups"]}),n.invalidateQueries({queryKey:["groups",e.id]})}})},g=e=>{let{authFetch:t}=(0,s.a)(),n=(0,a.NL)();return(0,i.D)({mutationFn:async n=>await t("/groups/".concat(e,"/invite"),{method:"POST",body:JSON.stringify(n)}),onSuccess:()=>{n.invalidateQueries({queryKey:["groups",e]}),n.invalidateQueries({queryKey:["groups"]})}})},f=e=>{let{authFetch:t}=(0,s.a)(),n=(0,a.NL)();return(0,i.D)({mutationFn:async n=>await t("/groups/".concat(e,"/members"),{method:"POST",body:JSON.stringify(n)}),onSuccess:()=>{n.invalidateQueries({queryKey:["groups",e]}),n.invalidateQueries({queryKey:["groups"]})}})},v=e=>{let{authFetch:t}=(0,s.a)(),n=(0,a.NL)();return(0,i.D)({mutationFn:async n=>(await t("/groups/".concat(e,"/members/").concat(n),{method:"DELETE"}),n),onSuccess:()=>{n.invalidateQueries({queryKey:["groups",e]}),n.invalidateQueries({queryKey:["groups"]})}})},h=e=>{let{authFetch:t}=(0,s.a)(),n=(0,a.NL)();return(0,i.D)({mutationFn:async n=>{if(!e)throw Error("Group id is required to create an expense");return t("/groups/".concat(e,"/expenses"),{method:"POST",body:JSON.stringify(n)})},onSuccess:(t,r,a)=>(e&&(n.invalidateQueries({queryKey:["groups",e]}),n.invalidateQueries({queryKey:["groups",e,"expenses"]}),n.invalidateQueries({queryKey:["groups",e,"balance"]}),n.invalidateQueries({queryKey:["groups"]})),a)})},b=e=>{let{authFetch:t}=(0,s.a)();return(0,r.a)({queryKey:["groups",e,"expenses"],enabled:!!e,queryFn:async()=>e?(await t("/groups/".concat(e,"/expenses"))).map(t=>l(e,t)):[],staleTime:15e3})},N=e=>{let{authFetch:t}=(0,s.a)();return(0,r.a)({queryKey:["groups",e,"balance"],enabled:!!e,queryFn:async()=>e?await t("/groups/".concat(e,"/balance")):null,staleTime:15e3})},w=()=>{let{authFetch:e}=(0,s.a)(),t=(0,a.NL)();return(0,i.D)({mutationFn:async t=>e("/expenses/personal",{method:"POST",body:JSON.stringify(t)}),onSuccess:()=>{t.invalidateQueries({queryKey:["personal-expenses"]})}})},S=()=>{let{authFetch:e}=(0,s.a)();return(0,r.a)({queryKey:["personal-expenses"],queryFn:async()=>await e("/expenses/personal"),staleTime:15e3})},q=()=>{let{authFetch:e}=(0,s.a)(),t=(0,a.NL)();return(0,i.D)({mutationFn:async t=>(await e("/expenses/personal/".concat(t),{method:"DELETE"}),t),onSuccess:()=>{t.invalidateQueries({queryKey:["personal-expenses"]})}})}},5192:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(5893),a=n(7294),i=n(5930);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n(1462).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var u=n(2336),o=n(1064),l=n(6471),d=n(1027),c=n(8701);function p(){let e=(0,l.q)(e=>e.groups),{isLoading:t}=(0,c.RW)(),n=(0,a.useMemo)(()=>Object.values(e).flatMap(e=>e.documents.map(t=>({group:e,doc:t}))),[e]);return(0,r.jsx)(u.L,{title:"Document vault",description:"Securely store passports, visas, permits, and insurance files with offline availability.",actions:(0,r.jsx)(d.C,{variant:"info",children:"Zero-trust encryption"}),children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsx)(o.ll,{children:"Stored documents"})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[t&&0===n.length&&(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Loading documents..."}),!t&&0===n.length&&(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"No documents uploaded yet."}),n.map(e=>{let{group:t,doc:n}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 p-4 text-sm text-slate-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-slate-800",children:n.title}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:[t.title," | ",n.fileType," | ",(n.fileSize/1024).toFixed(1)," KB"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-emerald-600"}),(0,r.jsx)("span",{className:"text-xs text-slate-500",children:"Encrypted at rest"})]})]},n.id)}),(0,r.jsxs)("div",{className:"rounded-xl bg-slate-50 p-4 text-sm text-slate-600",children:[(0,r.jsx)("p",{className:"font-medium text-slate-700",children:"Upload guidance"}),(0,r.jsx)("p",{className:"mt-2",children:"Use the trip workspace to upload files. They will sync here automatically once processed by the backend and cached for offline access."}),(0,r.jsxs)("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-500",children:[(0,r.jsx)(s,{className:"h-4 w-4"}),"Drag & drop coming soon"]})]})]})]})})}}},function(e){e.O(0,[664,40,803,542,888,774,179],function(){return e(e.s=3976)}),_N_E=e.O()}]);